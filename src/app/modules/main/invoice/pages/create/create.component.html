<app-breadcrumbs [breadcrumbs]="breadcrumbs"></app-breadcrumbs>
<app-title-bar [title]="title"></app-title-bar>
<form [formGroup]="form" markAllSubmit (validSubmit)="save()">
  <app-simple-card class="mb-3" [isLoading]="isLoading">
    <div fxLayout="row wrap" fxLayoutGap="16px 8px grid">
      <app-text-field
        *ngFor="let value of createInvoiceSchema"
        [textFieldValue]="value"
        [form]="form"
        [fxFlex]="value.df"
        [fxFlex.xs]="value.xs"
        [fxFlex.sm]="value.sm"
      ></app-text-field>
    </div>
  </app-simple-card>
  <app-simple-card
    title="Discounts"
    [actions]="[{ icon: 'add', action: addDiscount.bind(this) }]"
  >
    <div *ngFor="let discountControl of formDiscounts.controls; let i = index">
      <div fxLayout="row wrap" fxLayoutGap="16px 8px grid">
        <app-text-field
          *ngFor="let value of createDiscountSchema"
          [textFieldValue]="value"
          [form]="getFormDiscount(discountControl)"
          [fxFlex]="value.df"
          [fxFlex.xs]="value.xs"
          [fxFlex.sm]="value.sm"
        ></app-text-field>
        <div fxFlex="20%" class="text-end">
          <button
            type="button"
            mat-raised-button
            color="warn"
            [disabled]="i == 0"
            (click)="removeDiscount(i)"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  </app-simple-card>
  <app-button-bar>
    <button mat-raised-button type="button" color="primary" (click)="goBack()">
      Volver
    </button>
    <button mat-raised-button color="accent">Guardar</button>
  </app-button-bar>
</form>
